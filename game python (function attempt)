import random
import math

# this function prints the menu of choices after each fight that does not lead to levelup
def menu():
    choices = "FSLE"
    print("Please look at your options: ")
    print("[F] Fight without resting")
    print("[S] Short rest, then fight")
    print("[L] Long rest, then fight")
    print("[E] Exit")
    choice = input("-> Please enter your choice: ")
    choice = choice.upper()[0] # with this line we turn lowercase letters into uppercase
    if choice in choices:
        return choice
    print("Error: you did not give one of the choices, please try again")
    return menu()

# this function prints the menu of choices after levelup
def menu2():
    choices = "NQ"
    print("Please choose:")
    print("[N] New Fight")
    print("[Q] Quit")
    decision = input("-> Please enter your choice: ")
    decision = decision.upper()[0]
    if decision in choices:
        return decision
    print("Error: you did not give one of the choices, please try again\n")
    return menu2()
    
def monster():
    global diff
    diff = 4
    global monsterhp
    monsterhp = random.randint(diff, 2*diff)
    global monsterdp
    monsterdp = random.randint(diff/4, diff/2)
print(monster())
    
def fight():
    global monsterhp
    global monsterdp
    global hp
    global dp
    if monsterhp > 0 and hp > 0:
        monsterhp -= dp
        hp -= monsterdp
        if monsterhp < 0:
            monsterhp = 0
        if hp < 0:
            hp = 0
        print ("monster hp=", monsterhp, "monster dp=", monsterdp, "your hp=%.2f" %hp, "diff=", diff)
print(fight())
    
def menuimplementation():
    global hp
    global hpmax
    global xp
    global xpmax
    choice = menu()
    if choice == 'F':
        print(fight())
    elif choice == 'S':
        if hp < hpmax:
            hp += 0.1*hpmax
            xp -= 0.1*xpmax
        else:
            print ("your energy is full")
    elif choice == 'L':
        if hp < hpmax:
            hp += 0.2*hpmax
            xp -= 0.2*xpmax
        else:
            print ("your energy is full")
    elif choice == 'E':
        print ("your score is: %.2f" %score)
print(menuimplementation())

def menu2implementation():
    global xp
    global levelup
    global level
    global hp
    global hpmax
    global dp
    global dpmax
    # hero wins, but levels up
    if xp >= levelup:
        level +=1
        print ("level=", level)
        decision = menu2()
        if decision == 'N':
            hp = hpmax+20
            dp = dpmax+5
            
        elif decision == 'Q':
            print("your score is:%.2f" %score)
print(menu2implementation())

def win():
    global monsterhp
    global hp
    global diff
    global xp
    # hero wins, but does not level up
    if monsterhp <= 0 and hp > 0:
        diff += 4
        XP.append(xp)
        print ("good job, you won! Your xp increased at:", xp)
    print(menu())
print(win())

def levelup():
    global levelup
    global level
    levelup = 50 * 2**level
print(levelup())

def exit():
    print(score)
print(exit())

global level
level = 1
global XP
XP = []
global hp 
hp = 0
global hpmax
hpmax = 100
global dp
dp = 0
global dpmax
dpmax = 100
global xp
xp = 0
global xpmax
xpmax = 100
global diff
diff = 20

    


